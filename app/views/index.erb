<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Google Cloud Vision APIで遊んでみた</title>
</head>
<body>

  <header>
    <p>画像をアップロードするとGoogleCloudVisionAPIを用いて解析します</p>
    <p>APIリミット 1000/1000</p>
  </header>

  <!-- アップロードフォーム -->
  <form method="POST" enctype="multipart/form-data">
    <p><input name="file" type="file" accept="image/*"></p>
    <p><input type="submit" value="送信"></p>
  </form>

  <!-- エラー出力 -->
  <% if @err %>
  <div class="error">
    <%= @err %>
  </div>
  <% end %>

  <!-- 解析結果出力 -->
  <% if @landmarks %>
  <div class="result">
    <p>ランドマークを検出しました</p>
    <table border="1">
      <tbody>
        <tr>
          <th>名称</th>
          <td><%= @landmarks['description'] %></td>
        </tr>
        <tr>
          <th>信頼度</th>
          <td><%= @landmarks['score'] %></td>
        </tr>
        <tr>
          <th>緯度</th>
          <td><%= @landmarks['locations'][0]['latLng']['latitude'] %></td>
        </tr>
        <tr>
          <th>経度</th>
          <td><%= @landmarks['locations'][0]['latLng']['longitude'] %></td>
        </tr>
      </tbody>
    </table>
  </div>
  <% end %>

  <footer>
    <a href="https://github.com/Sa2Knight/vision-api-test">
      リポジトリ
    </a>
  </footer>
</body>
</html>
